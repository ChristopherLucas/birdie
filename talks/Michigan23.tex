%\documentclass{beamer}
\documentclass[handout]{beamer}

\input{../paper/header.tex}

\mode<presentation>
{
 \usetheme{Madrid}
 \usecolortheme{beaver}
 \setbeamercovered{invisible}
}
\beamertemplatenavigationsymbolsempty
\setbeamertemplate{footline}[frame number]{}
\setbeamertemplate{blocks}[shadow=true]

\usepackage{amsmath,amssymb,bm,latexsym,pifont}
\usepackage[english]{babel}
\usepackage[latin1]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{color}
\definecolor{gold}{rgb}{0.85,0.66,0}
\usepackage{comment}
\usepackage{ulem}
\usepackage{cancel}
\usepackage{soul}


% solving the undefined control sequence issue
\makeatletter
\let\@@magyar@captionfix\relax
\makeatother


\usepackage{subcaption}
\usepackage[color,all,import,arrow]{xy}

% === dcolumn package ===
\usepackage{dcolumn}
\newcolumntype{.}{D{.}{.}{-1}}
\newcolumntype{d}[1]{D{.}{.}{#1}}


% === tikz
\usepackage{tikz}
\usetikzlibrary{shapes,arrows}
\usetikzlibrary{decorations.markings}
\usetikzlibrary{decorations.pathmorphing}
\usetikzlibrary{shapes.geometric, arrows}
\usetikzlibrary{arrows,decorations.pathmorphing,backgrounds,positioning,fit,matrix}
\usetikzlibrary{shapes,decorations,arrows,calc,arrows.meta,fit,positioning}
\tikzset{
	-Latex,auto,node distance =1 cm and 1 cm,semithick,
	state/.style ={circle, draw, minimum width = 0.7 cm},
	point/.style = {circle, draw, inner sep=0.04cm,fill,node contents={}},
	bidirected/.style={Latex-Latex,dashed},
	el/.style = {inner sep=2pt, align=left, sloped}
}
\usetikzlibrary{positioning}
\usetikzlibrary{fadings}
\usetikzlibrary{intersections}

% === for Todai
\newcommand{\todai}{0}

% === if you want more than one slides on one page ===
\usepackage{pgfpages}
%\setbeameroption{show notes on second screen}
%\pgfpagesuselayout{2 on 1}[letterpaper,border shrink = 5mm]

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% If you wish to uncover everything in a step-wise fashion, uncomment
% the following command:
\beamerdefaultoverlayspecification{<+->}


\newcommand{\tit}{\bf Estimating Racial Disparities when\\ Race is Not Observed}

% == titles
\title[Algorithm-Assisted Human Decision]{\tit}

\institute[Harvard]{\large Harvard University }

\date{Department of Political Science, University of Michigan\\
  March 10, 2023 \\  \vspace{.25in} Joint work with
  Cory McCartan, Jacob Goldin, and Daniel E. Ho } 


\author[Kosuke Imai]{\large Kosuke Imai }


% == document begins
\begin{document}

%%% Title
\frame{\titlepage}

%%% Table of Contents
% \frame{\tableofcontents}

%%% Main Contents

\section{Introduction}

\begin{frame}

  \frametitle{Motivation}

  \begin{itemize}
  \item Importance of racial disparity estimation in many fields:\\
    public health, employment, voting, criminal justice, taxation,
    housing, lending, and internet technology

    \vfill
  \item But, often individual race is not availablec
    \begin{itemize}
    \item law may prohibits collection of information about race
      (e.g., Equal Credit Opportunity Act)
    \item agencies and companies may not wish to collect such information
    \end{itemize}
    \vfill
  \item How should we estimate racial disparities when race is not
    observed?
    \begin{itemize}
    \item Standard methods use BISG (Bayesian Improved Surname
      Geocoding)
    \item But, it has been shown that they are likely to yield biased estimates
    \end{itemize}

  \item Can we improve the standard methods and eliminate their bias? 
  \end{itemize}

\end{frame}


\begin{frame}

  \frametitle{Executive Order on Advancing Racial Equity and Support for Underserved Communities through the Federal Government}

  \begin{itemize}
  \item \alert{Sec. 4.  Identifying Methods to Assess Equity}.  (a)
    The Director of the Office of Management and Budget (OMB) shall,
    in partnership with the heads of agencies, study methods for
    assessing whether agency policies and actions create or exacerbate
    barriers to full and equal participation by all eligible
    individuals.  The study should aim to identify the best methods,
    consistent with applicable law, to assist agencies in assessing
    equity with respect to race, ethnicity, religion, income,
    geography, gender identity, sexual orientation, and disability.

    \vfill
  \item \alert{Sec. 5.  Conducting an Equity Assessment in Federal
      Agencies.}  The head of each agency, or designee, shall, in
    consultation with the Director of OMB, select certain of the
    agency's programs and policies for a review that will assess
    whether underserved communities and their members face systemic
    barriers in accessing benefits and opportunities available
    pursuant to those policies and programs.
  \end{itemize}

\end{frame}

\begin{frame}

  \frametitle{Overview of the Talk}

  \begin{enumerate}
  \item Existing methods are likely to be biased
    \begin{itemize}
    \item BISG predictions are typically well calibrated
    \item But, estimates of racial disparities are biased
    \item This is because race affects many aspects of our society
    \end{itemize}
    \bigskip
  \item \alert{BIRDiE} (Bayesian Instrumental Regression for Disparity
    Estimation) 
    \begin{itemize}
    \item New and more credible identification assumption
    \item Flexible model allows for various racial disparity estimands
    \item Sensitivity analysis for potential violation of the
      assumption
    \item Open-source software package \alert{birdie} available
    \end{itemize}
    \begin{flushright}
      \vspace{-.5in}
      \includegraphics[scale=0.165]{../man/figures/logo.png}
     \end{flushright}
  \item Empirical validation
    \begin{itemize}
    \item North Carolina voter file where self-reported race is
      observed
    \item Estimates of racial differences in party registration
    \item BIRDiE yields much smaller bias than the standard methods
    \item Results are robust to potential violation of assumptions
    \end{itemize}
  \end{enumerate}

\end{frame}


\begin{frame}

\frametitle{The Setup}

\begin{itemize}
\item Data
  \begin{itemize}
  \item $Y_i$: outcome of interest 
  \item $R_i$: (unobserved) race
  \item $S_i$: surname
  \item $G_i$: residence location
  \item $X_i$: other Census variables (optional)
  \item $Z_i$: covariates of interest
  \end{itemize}
\item Census data
  \begin{itemize}
  \item $\Pr(G_i = g, R_i = r, X_i = x)$
  \item $\Pr(R_i = r, S_i =s)$ for frequently occuring surnames
  \end{itemize}

  \vfill
\item Estimands
  \begin{itemize}
  \item $\E(Y_i \mid R_i)$: short regression
  \item $\E(Y_i \mid R_i, X_i)$: long regression 
  \end{itemize}

\item Racial disparity:
  \begin{itemize}
  \item $\E(Y_i \mid R_i = r) - \E(Y_i \mid R_i = r^\prime)$ for $r
    \ne r^\prime$
  \item $\E(Y_i \mid R_i = r, Z_i = z) - \E(Y_i \mid R_i = r^\prime, Z_i = z)$
  \end{itemize}

\end{itemize}
  
\end{frame}

\begin{frame}

  \frametitle{Standard Estimation Methods}
 
\begin{enumerate}
\item Predict race via \alert{BISG} (or its variant)
  \begin{itemize}
  \item Assumption: $G_i \indep  S_i \mid R_i$
  \item Bayes rule:
    \begin{align*}
      \hat{P}_{ir} \ & = \ \Pr(R_i = r \mid G_i = g, S_i = s) \\
      & = \ \frac{\Pr(S_i =s\mid
      \alert{G_i =g}, R_i = r)\Pr(G_i =g, R_i =r)}{\sum_{r^\prime} \Pr(S_i =s\mid
          \alert{G_i =g}, R_i = r^\prime)\Pr(G_i =g, R_i =r^\prime)} \\
      & = \ \frac{\Pr(S_i =s\mid
       R_i = r)\Pr(G_i =g, R_i =r)}{\sum_{r^\prime} \Pr(S_i =s\mid
       R_i = r^\prime)\Pr(G_i =g, R_i =r^\prime)}
    \end{align*}
  \item With covariates: $(G_i, X_i) \indep S_i \mid R_i$
  \end{itemize}
  \vfill
\item Estimate racial disparities $\mu_{Y\mid R}(y \mid r) = \Pr(Y_i = y \mid R_i = r)$
  \begin{itemize}
  \item \alert{weighting}:
    $$\hat\mu_{Y\mid R}^{\text{wtd}}(y \mid r) \ = \ \frac{\sum_i \mathbf{1}\{Y_i = y\}\hat{P}_{ir} }{\sum_i \hat{P}_{ir}}$$
  \item \alert{thresholding}: use the racial group with the largest
    probability as imputed race
  \end{itemize}
\end{enumerate}

\end{frame}

\begin{frame}

  \frametitle{BISG Prediction Works Reasonably Well {\scriptsize (Imai
      et al. 2022. {\it Sci. Adv.})}}

  \includegraphics[width=\textwidth]{figs/AUCROC_Surnames.pdf}\\
  \includegraphics[width=1.2\textwidth, trim = 100 0 0 0, clip]{figs/Calibration_Surnames.pdf}

\end{frame}

\begin{frame}

  \frametitle{Good Prediction Can Yield Biased Racial
    Disparity Estimates}

  \begin{columns}
    \begin{column}{0.575\textwidth}
      \begin{itemize}
      \item Bias of the weighted estimatorn {\scriptsize (Chen {\it et
            al.} 2019)}
        \begin{align*}
          & \hat\mu_{Y\mid R}^{\text{wtd}}(y \mid r) - \Pr(Y_i = y
            \mid R_i = r) \\
= & - \frac{\E[\text{Cov}(\mathbf{1}\{Y_i = y\}, \mathbf{1}\{R_i = r\}\mid G_i,
          X_i, S_i)]}{\Pr(R_i = r)}
          \end{align*}

          \vfill
        \item Required assumption: $$Y_i \indep R_i \mid G_i, S_i, X_i$$
          \vfill
     \item Problem: race affects many aspects of the society
      \end{itemize}
    \end{column}
    \begin{column}{0.425\textwidth}
      \tikzstyle{main node}=[circle,draw,font=\sffamily\Large\bfseries]
      \tikzstyle{sub node}=[circle,draw,dashed,font=\sffamily\Large\bfseries]
      \hspace{-.2in}\begin{tikzpicture}[->,>=stealth',shorten >=1pt,auto,node distance=2.6cm,thick]
        
        \node[main node] (G) {$G$};
        \node[main node] (Y) [right of=G] {$Y$};
        \node[main node] (S) [below left=1.3cm and 1.3cm of Y] {$S$};
        \node[sub node] (R) [below left=0.8cm and 0.8cm of S] {$R$};
        \node[main node] (X) [below of=Y] {$X$};
        
        \path[every node/.style={font=\sffamily\small}]
        (R) edge node  {} (G)
        (R) edge node  {} (X)
        (S) edge node  {} (Y)
        (R) edge node  {} (S)
        (G) edge node  {} (X)
        (G) edge node  {} (Y)
        (X) edge node  {} (Y);
    \end{tikzpicture}
  \end{column}
  \end{columns}

\end{frame}

\begin{frame}

\frametitle{New Identification Strategy}


  \begin{columns}
    \begin{column}{0.425\textwidth}
      \tikzstyle{main node}=[circle,draw,font=\sffamily\Large\bfseries]
      \tikzstyle{sub node}=[circle,draw,dashed,font=\sffamily\Large\bfseries]
   \begin{tikzpicture}[->,>=stealth',shorten >=1pt,auto,node distance=2.5cm,thick]
    
        \node[main node] (G) {$G$};
        \node[sub node] (R) [below of=G] {$R$};
        \node[main node] (S) [below left=0.5cm and 0.5cm of R] {$S$};
        \node[main node] (Y) [right of=G] {$Y$};
        \node[main node] (X) [below of=Y] {$X$};
        
        \path[every node/.style={font=\sffamily\small}]
        (R) edge node  {} (G)
        (R) edge node  {} (X)
        (R) edge node  {} (Y)
        (R) edge node  {} (S)
        (G) edge node  {} (X)
        (G) edge node  {} (Y)
        (X) edge node  {} (Y);
        
        %\path[every node/.style={font=\sffamily\small}, <->]
        %(G) edge [dashed, bend right] node  {} (S)
        %(X) edge [dashed, bend left] node  {} (S);
    \end{tikzpicture}
  \end{column}
   \begin{column}{0.575\textwidth}
      \begin{itemize}
        \item Required assumption: $$Y_i \indep S_i \mid G_i, R_i, X_i$$

        \item Surname as a proxy for race
        \item Race can directly or indirectly affects the outcome

          \medskip
        \item Potential violations:
          \begin{itemize}
          \item name-based discrimination
          \item coarse racial categories
          \end{itemize}
        \item Anonymous application
      \end{itemize}
    \end{column}
  \end{columns}
  
\end{frame}


\begin{frame}

  \frametitle{Surname as a High-dimensional Instrument}

  \begin{itemize}
  \item Identification
    {\small\begin{align*}
     & \overbrace{\Pr(Y=y\mid G=g, X=x, S=s)}^{\text{observed data}} \\
    = & \sum_{r\in\mathcal{R}} \underbrace{\Pr(Y=y\mid R=r, G=g,
        X=x)}_{\text{unknown parameters}}\times \underbrace{\Pr(R=r\mid
        G=g, X=x, S=s)}_{\text{BISG probability}}
           \end{align*}}
         \begin{itemize}
         \item $(|\mathcal{Y}|-1)\times|\mathcal{G}|\times|\mathcal{X}|\times|\mathcal{S}|$ equations
         \item
           $(|\mathcal{Y}|-1)\times|\mathcal{G}|\times|\mathcal{X}|\times|\mathcal{R}|$
           unknown parameters
         \end{itemize}
         \vfill
       \item OLS estimator:
         $$
    \hat{\vb*\mu}^{(\text{ols})}_{Y\mid RGX}(y\mid \cdot, g,x) 
    =  (\hat{\vb P}_{\cI(xg)}^\top \hat{\vb P}_{\cI(xg)})^{-1}\hat{\vb P}_{\cI(xg)}\,\ind\{{\vb Y}_{\cI(xg)} = y\},
    $$
    \begin{itemize}
    \item compute this for each $g$ and $x$, and aggregate
    \item unbiased estimate of $\Pr(Y_i= y \mid R_i = r)$
    \item ignores the fact that $\Pr(Y_i= y \mid R_i = r, G_i
      = g, X_i = x)$ is probability
  \end{itemize}
  \end{itemize}

\end{frame}

\end{document}